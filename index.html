<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Facility Calculator</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>
        <div class="col-lg-8 mx-auto p-5 py-lg-5">
            <header class="d-flex align-items-center pb-3 mb-3 border-bottom">
              <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="currentColor" class="bi bi-hammer" viewBox="0 0 16 16"><path d="M9.972 2.508a.5.5 0 0 0-.16-.556l-.178-.129a5.009 5.009 0 0 0-2.076-.783C6.215.862 4.504 1.229 2.84 3.133H1.786a.5.5 0 0 0-.354.147L.146 4.567a.5.5 0 0 0 0 .706l2.571 2.579a.5.5 0 0 0 .708 0l1.286-1.29a.5.5 0 0 0 .146-.353V5.57l8.387 8.873A.5.5 0 0 0 14 14.5l1.5-1.5a.5.5 0 0 0 .017-.689l-9.129-8.63c.747-.456 1.772-.839 3.112-.839a.5.5 0 0 0 .472-.334z"/></svg>
                <span class="display-6">Facility Calculator</span>
                <!--button type="button" class="btn btn-dark" id="lightswitch">Dark</button-->
              </a>
              
            </header>
            <main>
                <div class="row">
                    <div class="col-lg-9">
                        <table class="table table-striped" id="structuretable" > <!-- Selection Fields -->
                    <thead>
                        <tr>
                            <th scope="col">Structure</th>
                            <th scope="col">Routine</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div class="d-grid gap-2 d-md-block"> <!-- Buttons -->
                    <button class="btn btn-primary" type="button" onclick="newstructure()">Add Structure</button>
                    <button class="btn btn-primary" type="button" onclick="location.reload()">Reset</button>
                </div>
                    </div>
                    <div class="col-lg-3 align-self-center">
                        <div class="col-sm-auto"> <!-- Power Card -->
                            <div class="card text-bg-warning my-3">
                                <h5 class="card-header">Power</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <div class="row text-center">
                                            <div class="col-md-6">
                                                Generated
                                            </div>
                                            <div class="col-md-6" id="PowerGen">
                                                0
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="row text-center">
                                            <div class="col-md-6">
                                                Consumed
                                            </div>
                                            <div class="col-md-6" id="PowerCon">
                                                0
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="row text-center">
                                            <div class="col-md-6">
                                                Free
                                            </div>
                                            <div class="col-md-6" id="PowerFree">
                                                0
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card text-center my-2"> <!-- Stats Cards-->
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="ex1">
                            <li class="nav-item">
                                <a class="nav-link active" id="ex1-tab-1" data-bs-toggle="tab" aria-controls="ex1-tabs-1" aria-selected="true" href="#ex1-tabs-1">Per Minute</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link disabled" id="ex1-tab-1" data-bs-toggle="tab" aria-controls="ex1-tabs-2" aria-selected="false" href="#ex1-tabs-2">Per Hour</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="ex1-content">
                            <div class="tab-pane fade show active" id="ex1-tabs-1" aria-labelledby="ex1-tab-1"> <!-- Per Minute -->
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="card text-bg-info mb-3">
                                            <h5 class="card-header">Fluid (Litres)</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Water
                                                        </div>
                                                        <div class="col-md-6" id="fWater">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Oil
                                                        </div>
                                                        <div class="col-md-6" id="fOil">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Petrol
                                                        </div>
                                                        <div class="col-md-6" id="fPetrol">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Diesel
                                                        </div>
                                                        <div class="col-md-6" id="fDiesel">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Heavy Oil
                                                        </div>
                                                        <div class="col-md-6" id="fHOil">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Enriched Oil
                                                        </div>
                                                        <div class="col-md-6" id="fEOil">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-secondary mb-3">
                                            <h5 class="card-header">Construction Materials</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Construction Materials
                                                        </div>
                                                        <div class="col-md-6" id="cMats">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Processed Construction Materials
                                                        </div>
                                                        <div class="col-md-6" id="pCMats">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Steel Construction Materials
                                                        </div>
                                                        <div class="col-md-6" id="sCMats">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-secondary mb-3">
                                            <h5 class="card-header">Assembly Materials</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials I
                                                        </div>
                                                        <div class="col-md-6" id="asMat1">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials II
                                                        </div>
                                                        <div class="col-md-6" id="asMat2">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials III
                                                        </div>
                                                        <div class="col-md-6" id="asMat3">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials IV
                                                        </div>
                                                        <div class="col-md-6" id="asMat4">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials V
                                                        </div>
                                                        <div class="col-md-6" id="asMat5">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="card text-bg-danger mb-3">
                                            <h5 class="card-header">Ammunition</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Flame Ammo
                                                        </div>
                                                        <div class="col-md-6" id="aflame">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            250mm
                                                        </div>
                                                        <div class="col-md-6" id="a250">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            3C Rocket
                                                        </div>
                                                        <div class="col-md-6" id="a3c">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            4C Rocket
                                                        </div>
                                                        <div class="col-md-6" id="a4c">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            75mm
                                                        </div>
                                                        <div class="col-md-6" id="a75">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            94.5mm
                                                        </div>
                                                        <div class="col-md-6" id="a945">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            300mm
                                                        </div>
                                                        <div class="col-md-6" id="a300">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            120mm
                                                        </div>
                                                        <div class="col-md-6" id="a120">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            150mm
                                                        </div>
                                                        <div class="col-md-6" id="a150">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-success mb-3">
                                            <h5 class="card-header">Resources</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Scrap
                                                        </div>
                                                        <div class="col-md-6" id="rScrap">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Coal
                                                        </div>
                                                        <div class="col-md-6" id="rCoal">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Coke
                                                        </div>
                                                        <div class="col-md-6" id="rCoke">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Components
                                                        </div>
                                                        <div class="col-md-6" id="rComp">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Damaged Components
                                                        </div>
                                                        <div class="col-md-6" id="rDComp">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Sulfur
                                                        </div>
                                                        <div class="col-md-6" id="rSulfur">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Explosive Materials
                                                        </div>
                                                        <div class="col-md-6" id="rEMat">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            High Explosive Materials
                                                        </div>
                                                        <div class="col-md-6" id="rHEMat">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-light mb-3">
                                            <h5 class="card-header">Misc.</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Garrison Supplies
                                                        </div>
                                                        <div class="col-md-6" id="mGsupp">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Sandbags
                                                        </div>
                                                        <div class="col-md-6" id="mSand">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Barbed Wire
                                                        </div>
                                                        <div class="col-md-6" id="mBarb">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Metal Beams
                                                        </div>
                                                        <div class="col-md-6" id="mMBeam">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Concrete
                                                        </div>
                                                        <div class="col-md-6" id="mConc">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Pipe
                                                        </div>
                                                        <div class="col-md-6" id="mPipe">
                                                            0
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="ex1-tabs-2" aria-labelledby="ex1-tab-2"> <!-- Per Hour -->
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="card text-bg-info mb-3">
                                            <h5 class="card-header">Fluid (Litres)</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Water
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Oil
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Petrol
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Diesel
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Heavy Oil
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Enriched Oil
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-secondary mb-3">
                                            <h5 class="card-header">Construction Materials</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Construction Materials
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Processed Construction Materials
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Steel Construction Materials
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-secondary mb-3">
                                            <h5 class="card-header">Assembly Materials</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials I
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials II
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials III
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials IV
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Assembly Materials V
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="card text-bg-danger mb-3">
                                            <h5 class="card-header">Ammunition</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Flame Ammo
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            250mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            3C Rocket
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            4C Rocket
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            75mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            94.5mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            300mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            120mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            150mm
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-success mb-3">
                                            <h5 class="card-header">Resources</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Scrap
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Coal
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Coke
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Components
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Damaged Components
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Sulfur
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Explosive Materials
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            High Explosive Materials
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card text-bg-light mb-3">
                                            <h5 class="card-header">Misc.</h5>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Garrison Supplies
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Sandbags
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Barbed Wire
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Metal Beams
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Concrete
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            Pipe
                                                        </div>
                                                        <div class="col-md-6">
                                                            #
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>  
            </main>
        </div>   
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        const structuresroutines = {
            "Structure": ["Routine"],
            "Ammunition Factory": ["Flame Ammo", "250mm", "3C Rocket", "4C Rocket", "75mm", "94.5mm", "300mm", "120mm", "150mm"],
            "Coal Harvester": ["Harvest Coal"],
            "Coal Refinery": ["Basic Coke", "Coke Furnace", "Coal Liquefier", "Advanced Coal Liquefier"],
            "Component Harvester": ["Harvest Components", "Harvest Damaged Components"],
            "Large Assembly Factory": ["Factory Enabled", "Factory Disabled"],
            "Light Vehicle Assembly Station": ["Station Enabled", "Station Disabled"],
            "Maintenance Tunnel": ["Basic Garrison Supplies"],
            "Materials Factory": ["Basic Construction Materials", "Assembly Materials 1", "Assembly Materials 2", "Metal Press Bulk Construction Materials", "Smelter Bulk Construction Materials", "Scrap for Sandbags", "Scrap for Barbed Wire"],
            "Metalworks Factory": ["Basic Processed Construction Materials", "Basic Pipe", "Assembly Materials 4", "Assembly Materials 3", "Furnace Bulk Processed Construction Materials", "Processed Construction Materials and Metal Beams", "Damaged Components for Components", "Steel Construction Materials", "Bulk Steel Construction Materials", "Assembly Materials 5"],
            "Oil Refinery": ["Basic Petrol", "Reformer Petrol", "Cracking Unit Heavy Oil", "Petrochemical Plant Enriched Oil"],
            "Oil Well": ["Basic Oil", "Electric Oil", "Electric Oil Manual", "Fracking Oil", "Fracking Oil Manual"],
            "Power Plant": ["Diesel Power", "Petrol Power"],
            "Power Station": ["Oil Power", "Coal Power", "Heavy Oil Power", "Coke Power"],
            "Scrap Harvester": ["Harvest Scrap"],
            "Stationary Crane": ["Crane Enabled", "Crane Disabled"],
            "Sulfur Harvester": ["Harvest Sulfur"],
            "Water Pump": ["Basic Water", "Electric Water", "Electric Water Manual"],
        }

        const routinevalues = {
            "Routine": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Flame Ammo": [0, 4, 0, 0, 0, 0, 0, 0, -2.4, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -2.4, 0, 0, 0, 0, 0, 0],
            "250mm": [0, 4, 0, 0, 0, 0, 0, 0, -10, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -12, 0, 0, 0, 0, 0, 0],
            "3C Rocket": [0, 4, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -2.4, 0, 0, 0, 0, 0, 0],
            "4C Rocket": [0, 4, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -2.4, 0, 0, 0, 0, 0, 0],
            "75mm": [0, 4, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0],
            "94.5mm": [0, 4, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -4.8, 0, 0, 0, 0, 0, 0],
            "300mm": [0, 6, 0, 0, 0, 0, 0, 0, -9.6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, -14.4, 0, 0, 0, 0, 0, 0],
            "120mm": [0, 4, 0, 0, 0, 0, 0, 0, -8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, -12, 0, 0, 0, 0, 0, 0, 0],
            "150mm": [0, 4, 0, 0, 0, 0, 0, 0, -9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, -6, 0, 0, 0, 0, 0, 0],
            "Harvest Coal": [0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 250, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Basic Coke": [0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, 90, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Coke Furnace": [0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, 82.5, 0, 0, 7.5, 0, 0, 0, 0, 0, 0, 0, 0],
            "Coal Liquefier": [0, 4, -25, 25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -150, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 0],
            "Advanced Coal Liquefier": [0, 4, -33.33, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, 86.67, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Harvest Components": [0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Harvest Damaged Components": [0, 0, 0, 0, -30, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Factory Enabled": [0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Factory Disabled": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Station Enabled": [0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Station Disabled": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Basic Garrison Supplies": [0, 2, 0, 0, 0, 0, 0, 0, -0.27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.67, 0, 0, 0, 0, 0], 
            "Base Construction Materials": [0, 2, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Assembly Materials 1": [0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -15, 0, -75, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Assembly Materials 2": [0, 2, 0, 0, -50, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Metal Press Bulk Construction Materials": [0, 4, 0, 0, -60, 0, 0, 0, 7.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -36, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Smelter Bulk Construction Materials": [0, 4, 0, 0, 0, 0, 0, 0, 7.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -36, 0, -60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Scrap for Sandbags": [0, 2, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -60, 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0, 0],
            "Scrap for Barbed Wire": [0, 2, 0, 0, 0, 0, 0, 0, 2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0],
            "Basic Processed Construction Materials": [0, 5, 0, 0, 0, 0, 0, 0, -3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ],
            "Basic Pipe": [0, 5, 0, 0, 0, 0, 0, 0, 0, -1.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.5], 
            "Assembly Materials 4": [0, 5, 0, 0, 0, 0, -33, 0, 0, -0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Assembly Materials 3": [0, 5, 0, 0, 0, 0, 0, 0, -1.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -10, 0, 0, 0, 0, 0, 0, 0, 0],
            "Furnace Bulk Processed Construction Materials": [0, 8, 0, 0, 0, 0, -6, 0, -3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -55, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Processed Construction Materials and Metal Beams": [0, 5, 0, 0, 0, 0, 0, 0, -3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
            "Damaged Components for Components": [0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13.33, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Steel Construction Materials": [0, 9, 0, 0, 0, 0, -23.33, 0, 0, -2, 0.67, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -133.33, 0, 0, -43.33, 0, 0, 0, 0, 0, 0, 0, 0],
            "Bulk Steel Construction Materials": [0, 12, -66.67, 0, 0, 0, 0, -60, 0, -6, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -250, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Assembly Materials 5": [0, 8, 0, 0, 0, 0, 0, 0, 0, 0, -1.5, -5, -5, 0, 0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -122.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Basic Petrol": [0, 1, 0, -60, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Reformer Petrol": [0, 1, -12, -48, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Cracking Unit Heavy Oil": [0, 1.5, 0, -56.25, 0, 0, 33.75, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Petrochemical Plant Enriched Oil": [0, 6, 0, 0, 0, 0, -9, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -18, 0, 0, 0, 0, 0, 0, 0, 0],
            "Basic Oil": [0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Electric Oil": [0, 2, 0, 112.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ],
            "Electric Oil Manual": [0, 2, 0, 115.38, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Fracking Oil": [0, 3, -37.5, 150, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Fracking Oil Manual": [0, 3, -50, 150, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Diesel Power": [5, 0, 0, 0, 0, -33.33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Petrol Power": [12, 0, 0, 0, -33.33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Oil Power": [10, 0, 0, -33.33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Coal Power": [10, 0, -16.67, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -40, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Heavy Oil Power": [16, 0, 0, 0, 0, 0, -25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.5, 0, 0, 0, 0, 0, 0, 0, 0],
            "Coke Power": [16, 0, -12.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -30, 0, 0, 2.5, 0, 0, 0, 0, 0, 0, 0, 0],
            "Harvest Scrap": [0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 250, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Crane Enabled": [0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Crane Disabled": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Harvest Sulfur": [0, 0, 0, 0, 0, 0, -20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 0, 0],
            "Basic Water": [0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Electric Water": [0, 0.5, 72, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "Electric Water Manual": [0, 0.5, 75, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        }

        window.onload = newstructure(); // This was easier
        window.onload = newstructure();

        function createStructure(row) {
            const column = document.createElement("td");
            row.appendChild(column);
            return column;
        }

        function deleteStructure(button) {
            const row = button.parentNode.parentNode;
            const tbody = row.parentNode;
            tbody.removeChild(row);
            recompute();
        }

        function getIndexById(idToSearch, list) {
            return list.findIndex(function(elem) {return elem.id ==idToSearch});
        }

        function newstructure() {
            let newrow = document.createElement("tr");

            let structureColumn = createStructure(newrow);
            let structureField = document.createElement("select");
            structureField.setAttribute("id", "id" + Math.random().toString(16).slice(2));
            structureField.setAttribute("class", "form-select");
            structureField.setAttribute("aria-label", "Structure Selection Field");
            structureField.addEventListener('change', function(element) {
                let tableSelects = document.querySelector("#structuretable").querySelectorAll("select");
                let id_list = Array.from(tableSelects);
                let routineelement = document.getElementById(id_list.at(getIndexById(element.target.id, id_list) + 1).getAttribute("id"));
                routineelement.length = 1;
                recompute();
                let b = structuresroutines[element.target.value];
                for (let i = 0; i < b.length; i++) {
                    routineelement.options[routineelement.options.length] = new Option(b[i], b[i]);
                }
            });
            for (let a in structuresroutines) {
                structureField.options[structureField.options.length] = new Option(a, a);
                structureColumn.appendChild(structureField);
            }
            let routineColumn = createStructure(newrow);
            let routineField = document.createElement("select");
            routineField.setAttribute("id", "id" + Math.random().toString(16).slice(2));
            routineField.setAttribute("class", "form-select");
            routineField.setAttribute("aria-label", "Routine Selection Field");
            routineField.addEventListener('change', recompute);
            let b = structuresroutines[structureField.value]
            for (let i = 0; i < b.length; i++) {
                routineField.options[routineField.options.length] = new Option (b[i], b[i]);
                routineColumn.appendChild(routineField);
            }
            let removeColumn = createStructure(newrow);
            let remove = document.createElement("button")
            remove.setAttribute("class", "btn btn-danger");
            remove.setAttribute("type", "button");
            remove.setAttribute("value", "Remove Structure");
            remove.setAttribute("aria-label", "Delete Row");
            remove.setAttribute("onClick", "deleteStructure(this)");
            remove.insertAdjacentHTML( 'afterbegin', '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16"><path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/></svg>');
            removeColumn.appendChild(remove);
            let table = document.getElementById("structuretable");
            let tbody = table.querySelector("tbody") || table;
            tbody.appendChild(newrow);
        }

        function setText(id,newvalue) {
            let s = document.getElementById(id);
            s.innerHTML = newvalue;
        }

        function powerlimit(num) {
            let parse = parseFloat(num);
            return Math.min(Math.max(parse, 0), 30);
        }

        function recompute() {
            let currentvalues = Array(39).fill(0);
            let tAr = Array.from(document.querySelector("#structuretable").querySelectorAll("select"));
            let ar = [];
            for (let i = 0; i < tAr.length; i++) {
                if ( i % 2 !== 0) {ar.push(tAr[i].options[tAr[i].selectedIndex].text);
                }
            }
            for (let i = 0; i< ar.length; i++) {
                let x = routinevalues[ar[i]];
                currentvalues = currentvalues.map(function (num, idx) {
                    return num + x[idx];
                })
            }
            setText("PowerGen", powerlimit(currentvalues[0]));
            setText("PowerCon", currentvalues[1]);
            setText("PowerFree", powerlimit(currentvalues[0] - currentvalues[1]));
            setText("fWater", Math.round(currentvalues[2]*100)/100);
            setText("fOil", Math.round(currentvalues[3]*100)/100);
            setText("fPetrol", Math.round(currentvalues[4]*100)/100);
            setText("fDiesel", Math.round(currentvalues[5]*100)/100);
            setText("fHOil", Math.round(currentvalues[6]*100)/100);
            setText("fEOil", Math.round(currentvalues[7]*100)/100);
            setText("cMats", Math.round(currentvalues[8]*100)/100);
            setText("pCMats", Math.round(currentvalues[9]*100)/100);
            setText("sCMats", Math.round(currentvalues[10]*100)/100);
            setText("asMat1", Math.round(currentvalues[11]*100)/100);
            setText("asMat2", Math.round(currentvalues[12]*100)/100);
            setText("asMat3", Math.round(currentvalues[13]*100)/100);
            setText("asMat4", Math.round(currentvalues[14]*100)/100);
            setText("asMat5", Math.round(currentvalues[15]*100)/100);
            setText("aflame", Math.round(currentvalues[16]*100)/100);
            setText("a250", Math.round(currentvalues[17]*100)/100);
            setText("a3c", Math.round(currentvalues[18]*100)/100);
            setText("a4c", Math.round(currentvalues[19]*100)/100);
            setText("a75", Math.round(currentvalues[20]*100)/100);
            setText("a945", Math.round(currentvalues[21]*100)/100);
            setText("a300", Math.round(currentvalues[22]*100)/100);
            setText("a120", Math.round(currentvalues[23]*100)/100);
            setText("a150", Math.round(currentvalues[24]*100)/100);
            setText("rScrap", Math.round(currentvalues[25]*100)/100);
            setText("rCoal", Math.round(currentvalues[26]*100)/100);
            setText("rCoke", Math.round(currentvalues[27]*100)/100);
            setText("rComp", Math.round(currentvalues[28]*100)/100);
            setText("rDComp", Math.round(currentvalues[29]*100)/100);
            setText("rSulfur", Math.round(currentvalues[30]*100)/100);
            setText("rEMat", Math.round(currentvalues[31]*100)/100);
            setText("rHEMat", Math.round(currentvalues[32]*100)/100);
            setText("mGsupp", Math.round(currentvalues[33]*100)/100);
            setText("mSand", Math.round(currentvalues[34]*100)/100);
            setText("mBarb", Math.round(currentvalues[35]*100)/100);
            setText("mMBeam", Math.round(currentvalues[36]*100)/100);
            setText("mConc", Math.round(currentvalues[37]*100)/100);
            setText("mPipe", Math.round(currentvalues[38]*100)/100);
            console.log(currentvalues)
        }

        /*
            TODO:
            Darkmode Slider
            Per Hour Calculation
            Toggle Power slider
            Select amount
        */

    </script>
</html>
